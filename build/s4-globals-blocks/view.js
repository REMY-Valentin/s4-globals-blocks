!function(){let o=0,e={};console.log("=== S4 Carousel Debugging ==="),console.log("Document readyState:",document.readyState),console.log("Checking loaded scripts:");const l=document.getElementsByTagName("script");for(let o=0;o<l.length;o++){const e=l[o].src||"(inline script)";console.log(`Script ${o+1}:`,e),e.includes("jquery")&&console.log("  jQuery script found:",e),(e.includes("owl")||e.includes("carousel"))&&console.log("  Owl Carousel script found:",e)}console.log("Checking loaded CSS:");const t=document.styleSheets;for(let o=0;o<t.length;o++)try{const e=t[o].href||"(inline style)";console.log(`CSS ${o+1}:`,e),(e.includes("owl")||e.includes("carousel"))&&console.log("  Owl Carousel CSS found:",e)}catch(e){console.log(`CSS ${o+1}: (blocked by CORS policy)`)}function n(o,e){const l=e.attr("id");console.log(`Reinitializing carousel (ID: ${l})`);try{const o=e.attr("data-carousel-options");let t={};try{o&&(t=JSON.parse(o))}catch(o){console.error("Error parsing carousel options:",o)}e.trigger("destroy.owl.carousel"),e.removeClass("owl-loaded owl-drag"),e.find(".owl-stage-outer, .owl-stage, .owl-item, .owl-nav, .owl-dots, .owl-dot").remove(),e.find(".item").css({width:"",position:"",display:""}),e.owlCarousel(t),console.log(`Carousel (ID: ${l}) reinitialized successfully`);const n=e.find(".owl-stage-outer");if(n.length){const o="true"===e.attr("data-overflow-hidden")?"hidden":"visible";n.css("overflow",o)}}catch(o){console.error(`Error reinitializing carousel (ID: ${l}):`,o)}}function s(o){const l=o.attr("id"),t=`${o.attr("data-carousel-options")}_${o.attr("data-nav-style")}`;if(!e[l])return e[l]=t,!1;const n=e[l]!==t;return n&&(console.log(`Detected change in carousel config for ID: ${l}`),e[l]=t),n}function a(o){o(".s4_block_carousel.owl-carousel").each((function(l){const t=o(this),a=t.attr("id")||"carousel-"+l;console.log(`Initializing carousel #${l+1} (ID: ${a})`);try{if(t.hasClass("owl-loaded"))return void(s(t)?(console.log(`Config changed for carousel #${l+1} (ID: ${a}), reinitializing`),n(0,t)):console.log(`Carousel #${l+1} already initialized, skipping`));const o=t.attr("data-carousel-options");let r={};try{if(o){r=JSON.parse(o),console.log("Carousel options:",r);const l=t.attr("data-nav-style");e[a]=`${o}_${l}`}else console.warn("No carousel options found, using defaults")}catch(o){console.error("Error parsing carousel options:",o)}const i={items:1,loop:!0,margin:10,nav:!0,dots:!0,autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!0,mouseDrag:!0,pullDrag:!0,freeDrag:!1,touchDrag:!0,smartSpeed:500,responsive:{0:{items:1,nav:r.nav},600:{items:2,nav:r.nav},1e3:{items:3,nav:r.nav}},...r};t.owlCarousel(i),console.log(`Carousel #${l+1} (ID: ${a}) initialized successfully`);const c=t.find(".owl-stage-outer");if(c.length){const o="true"===t.attr("data-overflow-hidden")?"hidden":"visible";c.css("overflow",o),console.log("Applied overflow style: "+o)}}catch(o){console.error(`Error initializing carousel #${l+1} (ID: ${a}):`,o)}}))}if(console.log("Starting carousel initialization"),function e(){if("undefined"==typeof jQuery)return console.log("jQuery not loaded yet, retrying... attempt "+(o+1)),void(o<20?(o++,setTimeout(e,100)):console.error("Failed to load jQuery after multiple attempts"));jQuery(document).ready((function(o){console.log("jQuery is loaded, initializing carousel");const e=o(".s4_block_carousel.owl-carousel");if(console.log("DOM elements with class .s4_block_carousel.owl-carousel:",e.length),0===e.length){console.warn("No .s4_block_carousel.owl-carousel elements found on page");const e=o(".s4_block_carousel");return console.log("DOM elements with class .s4_block_carousel:",e.length),void(e.length>0&&console.log("Found carousel elements with main class only"))}if(console.log("Found "+e.length+" carousel(s) on page"),void 0===o.fn.owlCarousel){console.error("Owl Carousel plugin not loaded. Check if the script is included correctly.");const e="/wp-content/plugins/s4-globals-blocks/assets/owl.carousel.min.js";console.log("Attempting to load Owl Carousel from: "+e);const l=document.createElement("script");return l.src=e,l.onload=function(){console.log("Owl Carousel loaded manually, initializing carousels"),a(o)},l.onerror=function(){console.error("Failed to load Owl Carousel manually")},void document.head.appendChild(l)}a(o),function(o){window.MutationObserver?o(".s4_block_carousel.owl-carousel").each((function(){const e=o(this),l=e.attr("id");new MutationObserver((function(o){let t=!1;o.forEach((function(o){"attributes"!==o.type||"data-carousel-options"!==o.attributeName&&"data-nav-style"!==o.attributeName||(t=!0)})),t&&(console.log(`Mutation detected for carousel ID: ${l}, reinitializing...`),n(0,e))})).observe(e[0],{attributes:!0,attributeFilter:["data-carousel-options","data-nav-style"]}),console.log(`Mutation observer set up for carousel ID: ${l}`)})):console.log("MutationObserver not supported in this browser")}(o)}))}(),setTimeout((function(){if("complete"===document.readyState&&"undefined"!=typeof jQuery){console.log("Running fallback initialization check");const o=jQuery,e=o(".s4_block_carousel.owl-carousel:not(.owl-loaded)");e.length>0&&(console.log("Found "+e.length+" uninitialized carousel(s), reinitializing"),a(o))}}),1e3),"undefined"!=typeof wp&&wp.data){console.log("WordPress editor detected, setting up periodic checks");const o=setInterval((function(){if("undefined"!=typeof jQuery){const o=jQuery,e=o(".s4_block_carousel.owl-carousel");e.length>0&&e.each((function(){const e=o(this);s(e)&&n(0,e)}))}}),2e3);window.addEventListener&&window.addEventListener("unload",(function(){clearInterval(o)}))}}();